!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Animation=e()}(this,function(){"use strict";function t(){}function e(t){return t}function n(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=function(){function s(n){i(this,s);var o=n||{},r=o.duration,a=o.handler,c=o.ease,h=o.onstart,u=o.oncancel,f=o.oncomplete;if(isNaN(r))throw Error("`duration` should be defined, check https://github.com/broadsw0rd/dynamica#api");this.startTime=0,this.currentTime=0,this.duration=Number(r),this.handler=a||t,this.ease=c||e,this.onstart=h||t,this.oncancel=u||t,this.oncomplete=f||t,this.next=[],this._started=!1}return s.add=function(t){s.instances.push(t)},s.remove=function(t){var e=n(s.instances,t);e!==-1&&s.instances.splice(e,1)},s.animate=function(t){for(var e,n=s.instances.concat(),i=0;i<n.length;i++)e=n[i],e.animate(t)},s.prototype.start=function(){s.add(this),this._started=!0,this.onstart&&this.onstart()},s.prototype.animate=function(t){this.startTime=this.startTime||t,this.currentTime=t,t=(t-this.startTime)/this.duration,t<1?this.handler(this.ease(t)):this.complete()},s.prototype.complete=function(){this.remove(),this.handler(1),this.oncomplete&&this.oncomplete();for(var t,e=0;e<this.next.length;e++)t=this.next[e],t.startTime=this.currentTime,t.start()},s.prototype.remove=function(){this.startTime=0,s.remove(this),this._started=!1},s.prototype.cancel=function(){this.remove(),this.oncancel&&this.oncancel()},s.prototype.queue=function(t){this.next.push(t)},s.prototype.dequeue=function(t){var e=n(this.next,t);e!==-1&&this.next.splice(e,1)},s.prototype.started=function(){return this._started},s}();return s.instances=[],s});
