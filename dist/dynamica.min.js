!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Animation=n()}(this,function(){"use strict";function t(){}function n(t){return t}function e(t,n){for(var e=0;e<t.length;e++)if(t[e]===n)return e;return-1}function i(){return"undefined"!=typeof window&&null!=window.performance?window.performance.now():Date.now()-s}var o=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},s=Date.now(),r=function(){function s(e){o(this,s);var i=e||{},r=i.duration,a=i.handler,c=i.ease,h=i.onstart,u=i.oncancel,f=i.oncomplete;if(isNaN(r))throw Error("`duration` should be defined, check https://github.com/broadsw0rd/dynamica#api");this.startTime=0,this.duration=Number(r),this.handler=a||t,this.ease=c||n,this.onstart=h||t,this.oncancel=u||t,this.oncomplete=f||t,this.next=[],this._started=!1}return s.add=function(t){s.instances.push(t)},s.remove=function(t){var n=e(s.instances,t);n!==-1&&s.instances.splice(n,1)},s.animate=function(t){for(var n,e=s.instances.concat(),i=0;i<e.length;i++)n=e[i],n.animate(t)},s.prototype.start=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();s.add(this),this._started=!0,this.startTime=t,this.onstart&&this.onstart()},s.prototype.animate=function(t){var n=(t-this.startTime)/this.duration;n<1?this.handler(this.ease(n)):this.complete(t)},s.prototype.complete=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if(this.started()){this.remove(),this.handler(1),this.oncomplete&&this.oncomplete();for(var n,e=0;e<this.next.length;e++)n=this.next[e],n.start(Math.min(this.startTime+this.duration,t)),n.animate(t)}},s.prototype.remove=function(){s.remove(this),this._started=!1},s.prototype.cancel=function(){this.remove(),this.oncancel&&this.oncancel()},s.prototype.queue=function(t){this.next.push(t)},s.prototype.dequeue=function(t){var n=e(this.next,t);n!==-1&&this.next.splice(n,1)},s.prototype.started=function(){return this._started},s}();return r.instances=[],r});
